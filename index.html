<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jean-Claude.ai Van Damme</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Georgia, 'Times New Roman', Times, serif;
            background-color: #faf7f2;
            color: #2d2d2d;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: 1.6;
        }

        .header {
            text-align: center;
            padding: 3rem 2rem 2rem;
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .jcvd-logo {
            width: 32px;
            height: 32px;
            position: relative;
        }

        .jcvd-logo svg {
            width: 100%;
            height: 100%;
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 400;
            color: #2d2d2d;
            margin: 0;
            letter-spacing: -0.02em;
        }

        .header .subtitle {
            font-size: 1rem;
            color: #6b6b6b;
            margin-top: 0.5rem;
            font-weight: 400;
        }

	.chat-container {
            flex: 1;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 2rem 2rem;
            width: 100%;
        }

        .chat-messages {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e5e5;
            min-height: 400px;
            max-height: 500px;
            overflow-y: auto;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.02);
        }

        .message {
            margin-bottom: 1.5rem;
            animation: fadeIn 0.3s ease-in;
        }

        .message:last-child {
            margin-bottom: 0;
        }

        .message-header {
            font-weight: 500;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: #2d2d2d;
        }

        .message-content {
            color: #2d2d2d;
            line-height: 1.6;
        }

        .user-message .message-header {
            color: #d97706;
        }

        .ai-message .message-header {
            color: #2563eb;
        }

        .input-container {
            background: white;
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            gap: 0.75rem;
            align-items: flex-end;
            box-shadow: 0 1px 3px rgba(0,0,0,0.02);
        }

        #userInput {
            flex: 1;
            border: none;
            outline: none;
            font-size: 1rem;
            font-family: inherit;
            background: transparent;
            resize: none;
            min-height: 24px;
            max-height: 120px;
            line-height: 1.5;
        }

        #userInput::placeholder {
            color: #9ca3af;
        }

        #sendBtn {
            background: #d97706;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            padding: 0.75rem 1.5rem;
            white-space: nowrap;
        }

        #sendBtn:hover:not(:disabled) {
            background: #b45309;
        }

        #sendBtn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .typing-indicator {
            display: none;
            color: #6b6b6b;
            font-style: italic;
            padding: 1rem 1.5rem;
            font-size: 0.9rem;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            font-size: 0.85rem;
            color: #9ca3af;
        }

        /* Scrollbar styling */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        @media (max-width: 768px) {
            .header {
                padding: 2rem 1rem 1.5rem;
            }
            
            .header h1 {
                font-size: 1.75rem;
            }
            
            .chat-container {
                padding: 0 1rem 1rem;
            }
            
            .input-container {
                flex-direction: column;
                align-items: stretch;
            }

            #sendBtn {
                align-self: flex-end;
                width: fit-content;
            }
        }
    </style>
</head>
<body>

<div class="header">
        <div class="logo-container">
            <div class="jcvd-logo">
                <!-- JCVD Split Kick Silhouette SVG -->
                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#d97706">
                        <!-- Body/Torso -->
                        <ellipse cx="50" cy="45" rx="8" ry="12"/>
                        <!-- Head -->
                        <circle cx="50" cy="25" r="6"/>
                        <!-- Left arm -->
                        <ellipse cx="35" cy="40" rx="12" ry="4" transform="rotate(-30 35 40)"/>
                        <!-- Right arm -->
                        <ellipse cx="65" cy="40" rx="12" ry="4" transform="rotate(30 65 40)"/>
                        <!-- Left leg (split position) -->
                        <ellipse cx="15" cy="65" rx="20" ry="5" transform="rotate(-10 15 65)"/>
                        <!-- Right leg (split position) -->
                        <ellipse cx="85" cy="65" rx="20" ry="5" transform="rotate(10 85 65)"/>
                        <!-- Connection lines for dramatic effect -->
                        <rect x="48" y="55" width="4" height="8" transform="rotate(-45 50 59)"/>
                        <rect x="48" y="55" width="4" height="8" transform="rotate(45 50 59)"/>
                    </g>
                </svg>
            </div>
            <h1>Jean-Claude.ai Van Damme</h1>
        </div>
        <p class="subtitle">The muscles from Brussels with the brains of Claude.AI</p>
    </div>

    <div class="chat-container">
        <div class="chat-messages" id="chatMessages">
            <div class="message ai-message">
                <div class="message-header">Jean-Claude.ai</div>
                <div class="message-content">Welcome, my friend! I am Jean-Claude.ai Van Damme! Ask me anything - about life, about science, about ze way of ze warrior - and I will give you answers zat are... how you say... magnifique!</div>
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            Jean-Claude.ai is thinking with the intensity of a thousand helicopter kicks...
        </div>

        <div class="input-container">
            <textarea id="userInput" placeholder="How can I help you today?" rows="1"></textarea>
            <button id="sendBtn">Send</button>
        </div>
    </div>

    <div class="footer">
        <p>A parody AI assistant • Not affiliated with the real Jean-Claude Van Damme or Anthropic</p>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const typingIndicator = document.getElementById('typingIndicator');

        // Auto-resize textarea
        userInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        function getRandomElement(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        async function generateJCVDResponse(userQuestion) {
            try {
                // Call the backend server to get AI response
                const response = await fetch('http://localhost:3000/ask-jcvd', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ question: userQuestion })
                });

                const data = await response.json();
                
                if (data.error) {
                    return "Ze universe is having technical difficulties, my friend! Perhaps ze server is not running or ze API key needs attention.";
                }
                
                return data.response;
                
            } catch (error) {
                console.error('Error calling JCVD API:', error);
                return "Ah, my friend, ze connection to ze digital dojo has been interrupted! Make sure ze server is running on localhost:3000, and zen we can continue our conversation with ze power of artificial intelligence!";
            }
        }

        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'ai-message'}`;
            messageDiv.innerHTML = `
                <div class="message-header">${isUser ? 'You' : 'Jean-Claude.ai'}</div>
                <div class="message-content">${content}</div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTyping() {
            typingIndicator.style.display = 'block';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTyping() {
            typingIndicator.style.display = 'none';
        }

        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, true);
            userInput.value = '';
            userInput.style.height = 'auto';
            sendBtn.disabled = true;

            // Show typing indicator
            showTyping();

            try {
                // Check daily limit first
                const limitCheck = await fetch('http://localhost:3000/check-limit');
                const limitData = await limitCheck.json();
                
                if (!limitData.canAnswer) {
                    hideTyping();
                    addMessage("Jean-Claude.ai is currently meditating and reflecting on ze wisdom of ze universe. Ze daily training session has reached its limit, but like ze rising sun, I will return tomorrow with renewed energy and flexibility of mind! Come back zen, my friend, and we shall continue our journey of knowledge together! 🧘‍♂️");
                    sendBtn.disabled = false;
                    userInput.focus();
                    return;
                }

                // Generate and add AI response
                const response = await generateJCVDResponse(message);
                hideTyping();
                addMessage(response);
                
            } catch (error) {
                console.error('Error in sendMessage:', error);
                hideTyping();
                addMessage("Ze universe is experiencing technical difficulties, my friend!");
            }
            
            sendBtn.disabled = false;
            userInput.focus();
        }

        // Event listeners
        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Focus input on load
        userInput.focus();
    </script>
</body>
</html>